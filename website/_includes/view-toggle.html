

<button id="view-toggle"
  class="view-toggle-btn"
  aria-pressed="false"
  data-default="{{ include.default_view | default: 'card' }}">
  ðŸ“‹ ãƒªã‚¹ãƒˆè¡¨ç¤º
</button>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const button = document.getElementById('view-toggle');
  const cards = document.getElementById('cards-view');
  const list  = document.getElementById('list-view');
  if (!button || !cards || !list) return;

  // --- åˆæœŸçŠ¶æ…‹ ---
  const saved = localStorage.getItem('view-mode');
  const defaultView = button.dataset.default;
  let current = saved || defaultView || 'card';
  updateView(current);

  // --- ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ ---
  button.addEventListener('click', () => {
    current = current === 'card' ? 'list' : 'card';
    localStorage.setItem('view-mode', current);
    updateView(current);
  });

  // --- çŠ¶æ…‹æ›´æ–°é–¢æ•° ---
  function updateView(mode) {
    const isList = mode === 'list';
    cards.hidden = isList;
    list.hidden  = !isList;

    button.setAttribute('aria-pressed', isList ? 'true' : 'false');
    button.innerHTML = isList
      ? 'ðŸ—‚ ã‚«ãƒ¼ãƒ‰è¡¨ç¤º'
      : 'ðŸ“‹ ãƒªã‚¹ãƒˆè¡¨ç¤º';
  }
});
</script>
